<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI TTS Pro - Glassmorphism</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        * {
            box-sizing: border-box;
        }
        
        body {
            background: linear-gradient(135deg, #a7f3d0 0%, #6ee7b7 25%, #34d399 50%, #10b981 75%, #059669 100%);
            min-height: 100vh;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
        }
        
        /* Glassmorphism Effects */
        .glass {
            background: rgba(255, 255, 255, 0.25);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 8px 32px rgba(16, 185, 129, 0.15);
        }
        
        .glass-dark {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(25px);
            -webkit-backdrop-filter: blur(25px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 12px 40px rgba(16, 185, 129, 0.2);
        }
        
        .glass-card {
            background: rgba(255, 255, 255, 0.3);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.4);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .glass-card:hover {
            background: rgba(255, 255, 255, 0.4);
            transform: translateY(-4px);
            box-shadow: 0 16px 50px rgba(16, 185, 129, 0.25);
        }
        
        /* Floating Elements */
        .floating-orb {
            position: absolute;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            animation: float 6s ease-in-out infinite;
        }
        
        .orb-1 {
            width: 150px;
            height: 150px;
            top: 10%;
            right: 15%;
            animation-delay: 0s;
        }
        
        .orb-2 {
            width: 100px;
            height: 100px;
            bottom: 20%;
            left: 10%;
            animation-delay: 2s;
        }
        
        .orb-3 {
            width: 80px;
            height: 80px;
            top: 60%;
            right: 25%;
            animation-delay: 4s;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            33% { transform: translateY(-20px) rotate(120deg); }
            66% { transform: translateY(10px) rotate(240deg); }
        }
        
        /* Custom Button Styles */
        .btn-glass {
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.8) 0%, rgba(6, 182, 212, 0.8) 100%);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            font-weight: 600;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .btn-glass:hover {
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.9) 0%, rgba(6, 182, 212, 0.9) 100%);
            transform: translateY(-2px);
            box-shadow: 0 15px 35px rgba(16, 185, 129, 0.3);
        }
        
        .btn-glass::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }
        
        .btn-glass:hover::before {
            left: 100%;
        }
        
        /* Voice Selection Cards */
        .voice-card {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(15px);
            border: 2px solid transparent;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .voice-card:hover {
            background: rgba(255, 255, 255, 0.3);
            border-color: rgba(16, 185, 129, 0.5);
            transform: scale(1.02);
        }
        
        .voice-card.selected {
            background: rgba(16, 185, 129, 0.2);
            border-color: rgba(16, 185, 129, 0.8);
            box-shadow: 0 0 20px rgba(16, 185, 129, 0.3);
        }
        
        /* Loading Animation */
        .loading-overlay {
            background: rgba(16, 185, 129, 0.1);
            backdrop-filter: blur(30px);
        }
        
        .loading-spinner {
            width: 80px;
            height: 80px;
            border: 6px solid rgba(255, 255, 255, 0.3);
            border-top: 6px solid rgba(16, 185, 129, 0.8);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Wave Animation */
        .wave-container {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 4px;
            margin-top: 20px;
        }
        
        .wave-bar {
            width: 6px;
            height: 40px;
            background: linear-gradient(to top, rgba(16, 185, 129, 0.8), rgba(6, 182, 212, 0.8));
            border-radius: 3px;
            animation: wave 1.5s ease-in-out infinite;
        }
        
        .wave-bar:nth-child(1) { animation-delay: 0s; }
        .wave-bar:nth-child(2) { animation-delay: 0.1s; }
        .wave-bar:nth-child(3) { animation-delay: 0.2s; }
        .wave-bar:nth-child(4) { animation-delay: 0.3s; }
        .wave-bar:nth-child(5) { animation-delay: 0.4s; }
        .wave-bar:nth-child(6) { animation-delay: 0.5s; }
        .wave-bar:nth-child(7) { animation-delay: 0.4s; }
        .wave-bar:nth-child(8) { animation-delay: 0.3s; }
        .wave-bar:nth-child(9) { animation-delay: 0.2s; }
        .wave-bar:nth-child(10) { animation-delay: 0.1s; }
        
        @keyframes wave {
            0%, 100% { 
                transform: scaleY(0.3);
                opacity: 0.7;
            }
            50% { 
                transform: scaleY(1);
                opacity: 1;
            }
        }
        
        /* Progress Animation */
        .progress-ring {
            width: 120px;
            height: 120px;
            animation: rotate 2s linear infinite;
        }
        
        .progress-circle {
            fill: none;
            stroke: rgba(16, 185, 129, 0.8);
            stroke-width: 6;
            stroke-linecap: round;
            stroke-dasharray: 283;
            stroke-dashoffset: 283;
            animation: progress 3s ease-in-out infinite;
        }
        
        @keyframes rotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        @keyframes progress {
            0% { stroke-dashoffset: 283; }
            50% { stroke-dashoffset: 75; }
            100% { stroke-dashoffset: 283; }
        }
        
        /* Particle Animation */
        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: rgba(255, 255, 255, 0.6);
            border-radius: 50%;
            animation: particle-float 8s infinite linear;
        }
        
        @keyframes particle-float {
            0% {
                transform: translateY(100vh) translateX(0);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(-100px) translateX(100px);
                opacity: 0;
            }
        }
        
        /* Input Styles */
        .glass-input {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: rgba(31, 41, 55, 0.9);
            placeholder-color: rgba(107, 114, 128, 0.7);
        }
        
        .glass-input:focus {
            background: rgba(255, 255, 255, 0.3);
            border-color: rgba(16, 185, 129, 0.5);
            box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1);
            outline: none;
        }
        
        /* Text Gradient */
        .text-gradient {
            background: linear-gradient(135deg, #064e3b, #065f46, #047857);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        /* Notification */
        .notification {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.5);
            animation: slideIn 0.3s ease-out;
        }
        
        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: rgba(16, 185, 129, 0.5);
            border-radius: 10px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: rgba(16, 185, 129, 0.7);
        }
        
        /* Audio Player Enhancement */
        .audio-player {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(15px);
            border-radius: 20px;
            padding: 20px;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        
        /* Mobile Responsive */
        @media (max-width: 768px) {
            .glass {
                backdrop-filter: blur(15px);
                -webkit-backdrop-filter: blur(15px);
            }
            
            .floating-orb {
                display: none;
            }
        }
    </style>
</head>
<body class="relative overflow-x-hidden">
    <!-- Floating Background Elements -->
    <div class="floating-orb orb-1"></div>
    <div class="floating-orb orb-2"></div>
    <div class="floating-orb orb-3"></div>
    
    <!-- Animated Particles -->
    <div class="particle" style="left: 10%; animation-delay: 0s;"></div>
    <div class="particle" style="left: 20%; animation-delay: 2s;"></div>
    <div class="particle" style="left: 30%; animation-delay: 4s;"></div>
    <div class="particle" style="left: 40%; animation-delay: 6s;"></div>
    <div class="particle" style="left: 50%; animation-delay: 1s;"></div>
    <div class="particle" style="left: 60%; animation-delay: 3s;"></div>
    <div class="particle" style="left: 70%; animation-delay: 5s;"></div>
    <div class="particle" style="left: 80%; animation-delay: 7s;"></div>
    <div class="particle" style="left: 90%; animation-delay: 2.5s;"></div>

    <!-- Navigation -->
    <nav class="glass sticky top-0 z-40 rounded-b-3xl border-b border-white border-opacity-30">
        <div class="container mx-auto px-6 lg:px-8">
            <div class="flex justify-between items-center h-20">
                <div class="flex items-center space-x-4">
                    <div class="w-14 h-14 bg-gradient-to-br from-emerald-400 to-cyan-500 rounded-2xl flex items-center justify-center shadow-lg">
                        <i class="fas fa-microphone-alt text-white text-xl"></i>
                    </div>
                    <div>
                        <h1 class="text-2xl font-bold text-gradient">AI TTS Pro</h1>
                        <p class="text-emerald-800 text-sm opacity-80">Glassmorphism Edition</p>
                    </div>
                </div>
                <div class="flex items-center space-x-3">
                    <button id="helpBtn" class="glass-card p-3 rounded-2xl text-emerald-700 hover:text-emerald-800 transition-all duration-200">
                        <i class="fas fa-question-circle text-xl"></i>
                    </button>
                    <button id="settingsBtn" class="glass-card p-3 rounded-2xl text-emerald-700 hover:text-emerald-800 transition-all duration-200">
                        <i class="fas fa-cog text-xl"></i>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-8 max-w-7xl">
        <!-- Main Content Grid -->
        <div class="grid grid-cols-1 xl:grid-cols-3 gap-8">
            
            <!-- Left Panel - Text Input -->
            <div class="xl:col-span-2 space-y-8">
                <!-- Text Input Section -->
                <div class="glass rounded-3xl p-8">
                    <div class="flex items-center mb-8">
                        <div class="w-12 h-12 glass-card rounded-2xl flex items-center justify-center mr-4">
                            <i class="fas fa-edit text-emerald-600 text-xl"></i>
                        </div>
                        <h2 class="text-2xl font-bold text-gray-800">Text Input</h2>
                    </div>
                    
                    <!-- Language Selection -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                        <div>
                            <label class="block text-gray-700 text-sm font-semibold mb-3">Language</label>
                            <select id="languageSelect" class="w-full p-4 rounded-2xl glass-input transition-all duration-200">
                                <option value="si-LK">ðŸ‡±ðŸ‡° Sinhala (Sri Lanka)</option>
                                <option value="en-US" selected>ðŸ‡ºðŸ‡¸ English (US)</option>
                                <option value="en-GB">ðŸ‡¬ðŸ‡§ English (UK)</option>
                                <option value="en-AU">ðŸ‡¦ðŸ‡º English (Australia)</option>
                                <option value="ta-IN">ðŸ‡®ðŸ‡³ Tamil (India)</option>
                                <option value="hi-IN">ðŸ‡®ðŸ‡³ Hindi (India)</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-gray-700 text-sm font-semibold mb-3">Voice Quality</label>
                            <select id="qualitySelect" class="w-full p-4 rounded-2xl glass-input transition-all duration-200">
                                <option value="premium">ðŸŒŸ Premium (Gemini AI)</option>
                                <option value="standard">âš¡ Standard (Fast)</option>
                            </select>
                        </div>
                    </div>

                    <!-- Text Area -->
                    <div class="mb-8">
                        <label class="block text-gray-700 text-sm font-semibold mb-4">Enter Your Text</label>
                        <div class="relative">
                            <textarea 
                                id="textInput" 
                                placeholder="à¶”à¶¶à·š à¶´à·™à·… à¶¸à·™à·„à·’ à¶½à·’à¶ºà¶±à·Šà¶±... / Enter your text here..."
                                class="w-full h-48 p-6 rounded-2xl glass-input resize-none transition-all duration-200 text-gray-800 placeholder-gray-500"
                            ></textarea>
                            <div class="absolute bottom-4 right-4 glass-card px-3 py-2 rounded-xl text-xs text-gray-600">
                                <span id="charCount">0 characters</span> â€¢ <span id="wordCount">0 words</span>
                            </div>
                        </div>
                    </div>

                    <!-- Quick Templates -->
                    <div>
                        <label class="block text-gray-700 text-sm font-semibold mb-4">Quick Templates</label>
                        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
                            <button class="template-btn glass-card p-4 rounded-2xl text-emerald-700 text-sm font-medium transition-all duration-200" data-text="à¶†à¶ºà·”à¶¶à·à·€à¶±à·Š! à¶”à¶¶à¶§ à·ƒà·”à¶· à¶¯à·’à¶±à¶ºà¶šà·Š à·€à·šà·€à·!">
                                <i class="fas fa-globe mr-2"></i>Sinhala Greeting
                            </button>
                            <button class="template-btn glass-card p-4 rounded-2xl text-emerald-700 text-sm font-medium transition-all duration-200" data-text="Hello! Welcome to our TTS application.">
                                <i class="fas fa-hand-wave mr-2"></i>English Greeting
                            </button>
                            <button class="template-btn glass-card p-4 rounded-2xl text-emerald-700 text-sm font-medium transition-all duration-200" data-text="This is a test of our advanced text-to-speech system.">
                                <i class="fas fa-vial mr-2"></i>Test Message
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Advanced Settings -->
                <div class="glass rounded-3xl p-8">
                    <div class="flex items-center mb-8">
                        <div class="w-12 h-12 glass-card rounded-2xl flex items-center justify-center mr-4">
                            <i class="fas fa-sliders-h text-cyan-600 text-xl"></i>
                        </div>
                        <h3 class="text-2xl font-bold text-gray-800">Advanced Settings</h3>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                        <div>
                            <label class="block text-gray-700 text-sm font-semibold mb-4">Speech Rate</label>
                            <input type="range" id="speechRate" min="-50" max="50" value="0" class="w-full h-3 bg-white bg-opacity-30 rounded-full appearance-none cursor-pointer">
                            <span id="rateValue" class="text-gray-600 text-sm mt-2 block text-center">Normal (0%)</span>
                        </div>
                        
                        <div>
                            <label class="block text-gray-700 text-sm font-semibold mb-4">Pitch</label>
                            <input type="range" id="speechPitch" min="-20" max="20" value="0" class="w-full h-3 bg-white bg-opacity-30 rounded-full appearance-none cursor-pointer">
                            <span id="pitchValue" class="text-gray-600 text-sm mt-2 block text-center">Normal (0Hz)</span>
                        </div>
                        
                        <div>
                            <label class="block text-gray-700 text-sm font-semibold mb-4">Expressiveness</label>
                            <input type="range" id="temperature" min="0.1" max="2.0" step="0.1" value="1.0" class="w-full h-3 bg-white bg-opacity-30 rounded-full appearance-none cursor-pointer">
                            <span id="tempValue" class="text-gray-600 text-sm mt-2 block text-center">1.0</span>
                        </div>
                    </div>

                    <div class="mt-8 pt-6 border-t border-white border-opacity-20">
                        <div class="flex flex-wrap gap-6">
                            <label class="flex items-center text-gray-700 cursor-pointer glass-card p-3 rounded-xl">
                                <input type="checkbox" id="enhanceAudio" class="w-5 h-5 text-emerald-600 bg-white bg-opacity-50 border-emerald-300 rounded focus:ring-emerald-500 focus:ring-2">
                                <span class="ml-3 text-sm font-medium">Audio Enhancement</span>
                            </label>
                            <label class="flex items-center text-gray-700 cursor-pointer glass-card p-3 rounded-xl">
                                <input type="checkbox" id="autoPlay" class="w-5 h-5 text-emerald-600 bg-white bg-opacity-50 border-emerald-300 rounded focus:ring-emerald-500 focus:ring-2">
                                <span class="ml-3 text-sm font-medium">Auto Play</span>
                            </label>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right Panel - Controls -->
            <div class="space-y-8">
                <!-- Voice Selection -->
                <div class="glass rounded-3xl p-6">
                    <div class="flex items-center mb-6">
                        <div class="w-10 h-10 glass-card rounded-xl flex items-center justify-center mr-3">
                            <i class="fas fa-user-friends text-emerald-600"></i>
                        </div>
                        <h3 class="text-xl font-bold text-gray-800">Voice Selection</h3>
                    </div>
                    
                    <div id="voiceContainer" class="space-y-3">
                        <!-- Voice options will be populated here -->
                    </div>
                </div>

                <!-- Generation Controls -->
                <div class="glass rounded-3xl p-6">
                    <div class="flex items-center mb-6">
                        <div class="w-10 h-10 glass-card rounded-xl flex items-center justify-center mr-3">
                            <i class="fas fa-play text-emerald-600"></i>
                        </div>
                        <h3 class="text-xl font-bold text-gray-800">Generate</h3>
                    </div>
                    
                    <button id="generateBtn" class="w-full btn-glass py-4 px-6 rounded-2xl text-lg font-semibold mb-4">
                        <i class="fas fa-magic mr-3"></i>
                        Generate Speech
                    </button>
                    
                    <div class="grid grid-cols-2 gap-3">
                        <select id="formatSelect" class="glass-input p-3 rounded-xl text-sm">
                            <option value="wav">WAV</option>
                            <option value="mp3">MP3</option>
                            <option value="ogg">OGG</option>
                        </select>
                        <button id="clearBtn" class="glass-card text-gray-700 py-3 px-4 rounded-xl text-sm font-medium hover:bg-white hover:bg-opacity-40">
                            <i class="fas fa-trash mr-2"></i>Clear
                        </button>
                    </div>
                </div>

                <!-- Audio Player -->
                <div id="audioPlayerContainer" class="glass rounded-3xl p-6 hidden">
                    <div class="flex items-center mb-6">
                        <div class="w-10 h-10 glass-card rounded-xl flex items-center justify-center mr-3">
                            <i class="fas fa-volume-up text-cyan-600"></i>
                        </div>
                        <h3 class="text-xl font-bold text-gray-800">Audio Player</h3>
                    </div>
                    
                    <div class="audio-player mb-4">
                        <audio id="audioPlayer" controls class="w-full">
                            Your browser does not support the audio element.
                        </audio>
                    </div>
                    
                    <div class="grid grid-cols-2 gap-3">
                        <button id="downloadBtn" class="btn-glass py-3 px-4 rounded-xl text-sm font-semibold">
                            <i class="fas fa-download mr-2"></i>Download
                        </button>
                        <button id="shareBtn" class="glass-card text-gray-700 py-3 px-4 rounded-xl text-sm font-medium hover:bg-white hover:bg-opacity-40">
                            <i class="fas fa-share mr-2"></i>Share
                        </button>
                    </div>
                    
                    <div id="audioInfo" class="mt-4 glass-card p-4 rounded-xl text-gray-600 text-sm">
                        <!-- Audio information will be displayed here -->
                    </div>
                </div>

                <!-- Recent History -->
                <div class="glass rounded-3xl p-6">
                    <div class="flex items-center mb-6">
                        <div class="w-10 h-10 glass-card rounded-xl flex items-center justify-center mr-3">
                            <i class="fas fa-history text-emerald-600"></i>
                        </div>
                        <h3 class="text-xl font-bold text-gray-800">Recent</h3>
                    </div>
                    
                    <div id="recentList" class="space-y-3 max-h-64 overflow-y-auto">
                        <p class="text-gray-500 text-sm italic text-center py-8">No recent generations</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="fixed inset-0 loading-overlay z-50 hidden flex items-center justify-center">
        <div class="glass-dark rounded-3xl p-12 max-w-md mx-4 text-center">
            <div class="relative mb-8">
                <svg class="progress-ring mx-auto">
                    <circle class="progress-circle" cx="60" cy="60" r="45"></circle>
                </svg>
                <div class="absolute inset-0 flex items-center justify-center">
                    <i class="fas fa-microphone-alt text-emerald-500 text-2xl"></i>
                </div>
            </div>
            
            <h3 class="text-white text-xl font-bold mb-3">Generating Speech</h3>
            <p id="loadingText" class="text-gray-200 mb-6">Processing your text...</p>
            
            <div class="wave-container">
                <div class="wave-bar"></div>
                <div class="wave-bar"></div>
                <div class="wave-bar"></div>
                <div class="wave-bar"></div>
                <div class="wave-bar"></div>
                <div class="wave-bar"></div>
                <div class="wave-bar"></div>
                <div class="wave-bar"></div>
                <div class="wave-bar"></div>
                <div class="wave-bar"></div>
            </div>
        </div>
    </div>

    <!-- Notifications -->
    <div id="notification" class="fixed top-6 right-6 z-50 hidden">
        <div class="notification rounded-2xl p-6 max-w-sm shadow-2xl">
            <div class="flex items-center">
                <i id="notificationIcon" class="text-3xl mr-4"></i>
                <div>
                    <h4 id="notificationTitle" class="text-gray-800 font-bold text-lg"></h4>
                    <p id="notificationMessage" class="text-gray-600 text-sm"></p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Application State
        let appState = {
            currentAudio: null,
            recentGenerations: [],
            isGenerating: false
        };

        // Gemini Voice configurations (Edge TTS removed)
        const voiceConfigs = {
            'Zephyr': { gender: 'neutral', style: 'warm', emoji: 'ðŸ˜Š', description: 'Warm & Friendly' },
            'Puck': { gender: 'neutral', style: 'friendly', emoji: 'ðŸ˜„', description: 'Cheerful & Upbeat' },
            'Aoede': { gender: 'female', style: 'professional', emoji: 'ðŸ‘©â€ðŸ’¼', description: 'Professional & Clear' },
            'Charon': { gender: 'male', style: 'authoritative', emoji: 'ðŸ‘¨â€ðŸ’¼', description: 'Authoritative & Strong' },
            'Fenrir': { gender: 'male', style: 'deep', emoji: 'ðŸº', description: 'Deep & Powerful' },
            'Kore': { gender: 'female', style: 'gentle', emoji: 'ðŸŒ¸', description: 'Gentle & Soothing' }
        };

        // DOM Elements
        const elements = {
            textInput: document.getElementById('textInput'),
            languageSelect: document.getElementById('languageSelect'),
            voiceContainer: document.getElementById('voiceContainer'),
            generateBtn: document.getElementById('generateBtn'),
            audioPlayer: document.getElementById('audioPlayer'),
            audioPlayerContainer: document.getElementById('audioPlayerContainer'),
            downloadBtn: document.getElementById('downloadBtn'),
            loadingOverlay: document.getElementById('loadingOverlay'),
            notification: document.getElementById('notification'),
            recentList: document.getElementById('recentList'),
            clearBtn: document.getElementById('clearBtn')
        };

        // Initialize Application
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
            setupEventListeners();
            updateVoiceOptions();
            loadUserData();
        });

        function initializeApp() {
            updateTextStats();
            updateRangeValues();
            showWelcomeMessage();
        }

        function setupEventListeners() {
            // Text input events
            elements.textInput.addEventListener('input', updateTextStats);
            
            // Template buttons
            document.querySelectorAll('.template-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    elements.textInput.value = this.dataset.text;
                    updateTextStats();
                    this.style.transform = 'scale(0.95)';
                    setTimeout(() => this.style.transform = 'scale(1)', 150);
                });
            });

            // Range inputs
            document.getElementById('speechRate').addEventListener('input', updateRangeValues);
            document.getElementById('speechPitch').addEventListener('input', updateRangeValues);
            document.getElementById('temperature').addEventListener('input', updateRangeValues);

            // Main buttons
            elements.generateBtn.addEventListener('click', generateSpeech);
            elements.clearBtn.addEventListener('click', clearAll);
            elements.downloadBtn.addEventListener('click', downloadAudio);

            // Help button
            document.getElementById('helpBtn').addEventListener('click', showHelp);
        }

        function updateTextStats() {
            const text = elements.textInput.value;
            const charCount = text.length;
            const wordCount = text.trim() ? text.trim().split(/\s+/).length : 0;
            
            document.getElementById('charCount').textContent = `${charCount} characters`;
            document.getElementById('wordCount').textContent = `${wordCount} words`;
        }

        function updateRangeValues() {
            const rate = document.getElementById('speechRate').value;
            const pitch = document.getElementById('speechPitch').value;
            const temp = document.getElementById('temperature').value;
            
            document.getElementById('rateValue').textContent = `${rate > 0 ? '+' : ''}${rate}%`;
            document.getElementById('pitchValue').textContent = `${pitch > 0 ? '+' : ''}${pitch}Hz`;
            document.getElementById('tempValue').textContent = temp;
        }

        function updateVoiceOptions() {
            elements.voiceContainer.innerHTML = '';
            
            Object.entries(voiceConfigs).forEach(([voiceName, config]) => {
                const voiceCard = document.createElement('div');
                voiceCard.className = 'voice-card p-4 rounded-2xl transition-all duration-300';
                voiceCard.innerHTML = `
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-3">
                            <span class="text-2xl">${config.emoji}</span>
                            <div>
                                <div class="text-gray-800 font-semibold text-sm">${voiceName}</div>
                                <div class="text-gray-600 text-xs">${config.description}</div>
                            </div>
                        </div>
                        <div class="w-4 h-4 rounded-full border-2 border-emerald-400 flex items-center justify-center">
                            <div class="w-2 h-2 rounded-full bg-emerald-500 hidden selected-dot"></div>
                        </div>
                    </div>
                `;
                
                voiceCard.addEventListener('click', () => selectVoice(voiceCard, voiceName));
                elements.voiceContainer.appendChild(voiceCard);
            });
            
            // Select first voice by default
            if (elements.voiceContainer.firstChild) {
                elements.voiceContainer.firstChild.click();
            }
        }

        function selectVoice(card, voiceName) {
            // Remove selection from all cards
            document.querySelectorAll('.voice-card').forEach(c => {
                c.classList.remove('selected');
                c.querySelector('.selected-dot').classList.add('hidden');
            });
            
            // Add selection to clicked card
            card.classList.add('selected');
            card.querySelector('.selected-dot').classList.remove('hidden');
            card.dataset.selectedVoice = voiceName;
        }

        async function generateSpeech() {
            const text = elements.textInput.value.trim();
            if (!text) {
                showNotification('error', 'Input Required', 'Please enter some text to generate speech.');
                return;
            }

            const selectedVoiceCard = document.querySelector('.voice-card.selected');
            if (!selectedVoiceCard) {
                showNotification('error', 'Voice Required', 'Please select a voice.');
                return;
            }

            if (appState.isGenerating) return;

            appState.isGenerating = true;
            showLoading(true);
            elements.generateBtn.disabled = true;
            elements.generateBtn.innerHTML = '<i class="fas fa-spinner fa-spin mr-3"></i>Generating...';

            try {
                const requestData = {
                    text: text,
                    engine: 'gemini', // Only Gemini now
                    voice: selectedVoiceCard.dataset.selectedVoice,
                    language: elements.languageSelect.value,
                    rate: `${document.getElementById('speechRate').value > 0 ? '+' : ''}${document.getElementById('speechRate').value}%`,
                    pitch: `${document.getElementById('speechPitch').value > 0 ? '+' : ''}${document.getElementById('speechPitch').value}Hz`,
                    temperature: parseFloat(document.getElementById('temperature').value),
                    enhance: document.getElementById('enhanceAudio').checked,
                    format: document.getElementById('formatSelect').value
                };

                // Simulate API call (replace with actual endpoint)
                await simulateApiCall(requestData);
                
                showNotification('success', 'Success!', 'Speech generated successfully.');
                
            } catch (error) {
                console.error('Generation error:', error);
                showNotification('error', 'Generation Failed', error.message);
            } finally {
                appState.isGenerating = false;
                showLoading(false);
                elements.generateBtn.disabled = false;
                elements.generateBtn.innerHTML = '<i class="fas fa-magic mr-3"></i>Generate Speech';
            }
        }

        async function simulateApiCall(data) {
            // Simulate API processing time
            return new Promise((resolve, reject) => {
                setTimeout(() => {
                    // Simulate success/failure
                    if (Math.random() > 0.1) { // 90% success rate
                        // Show audio player
                        elements.audioPlayerContainer.classList.remove('hidden');
                        
                        // Add to recent generations
                        addToRecent({
                            text: data.text.substring(0, 50) + (data.text.length > 50 ? '...' : ''),
                            voice: data.voice,
                            timestamp: new Date().toLocaleTimeString(),
                            format: data.format
                        });
                        
                        resolve();
                    } else {
                        reject(new Error('API simulation failure'));
                    }
                }, 3000);
            });
        }

        function addToRecent(generation) {
            appState.recentGenerations.unshift(generation);
            if (appState.recentGenerations.length > 5) {
                appState.recentGenerations.pop();
            }
            updateRecentList();
        }

        function updateRecentList() {
            if (appState.recentGenerations.length === 0) {
                elements.recentList.innerHTML = '<p class="text-gray-500 text-sm italic text-center py-8">No recent generations</p>';
                return;
            }
            
            elements.recentList.innerHTML = appState.recentGenerations.map(gen => `
                <div class="glass-card p-4 rounded-2xl hover:bg-white hover:bg-opacity-30 transition-all duration-200 cursor-pointer">
                    <div class="text-gray-800 text-sm font-medium mb-2">${gen.text}</div>
                    <div class="text-gray-600 text-xs flex justify-between items-center">
                        <span>${gen.voice}</span>
                        <span>${gen.timestamp}</span>
                    </div>
                </div>
            `).join('');
        }

        function showLoading(show) {
            if (show) {
                elements.loadingOverlay.classList.remove('hidden');
                document.body.style.overflow = 'hidden';
            } else {
                elements.loadingOverlay.classList.add('hidden');
                document.body.style.overflow = 'auto';
            }
        }

        function showNotification(type, title, message) {
            const icons = {
                success: 'fas fa-check-circle text-emerald-500',
                error: 'fas fa-exclamation-circle text-red-500',
                info: 'fas fa-info-circle text-blue-500'
            };
            
            document.getElementById('notificationIcon').className = icons[type];
            document.getElementById('notificationTitle').textContent = title;
            document.getElementById('notificationMessage').textContent = message;
            
            elements.notification.classList.remove('hidden');
            
            setTimeout(() => {
                elements.notification.classList.add('hidden');
            }, 5000);
        }

        function clearAll() {
            elements.textInput.value = '';
            updateTextStats();
            elements.audioPlayerContainer.classList.add('hidden');
            
            // Reset sliders
            document.getElementById('speechRate').value = 0;
            document.getElementById('speechPitch').value = 0;
            document.getElementById('temperature').value = 1.0;
            updateRangeValues();
            
            showNotification('info', 'Cleared', 'All inputs have been reset.');
        }

        function downloadAudio() {
            showNotification('info', 'Download', 'Audio download functionality would be implemented here.');
        }

        function showHelp() {
            showNotification('info', 'Help', 'This is a beautiful glassmorphism TTS application powered by Gemini AI.');
        }

        function showWelcomeMessage() {
            setTimeout(() => {
                showNotification('info', 'Welcome!', 'Welcome to the new Glassmorphism AI TTS Pro.');
            }, 1000);
        }

        function loadUserData() {
            // Load any saved user preferences
            const saved = localStorage.getItem('tts_preferences');
            if (saved) {
                try {
                    const prefs = JSON.parse(saved);
                    if (prefs.language) elements.languageSelect.value = prefs.language;
                } catch (e) {
                    console.log('Failed to load preferences');
                }
            }
        }

        // Save preferences on change
        elements.languageSelect.addEventListener('change', () => {
            const prefs = {
                language: elements.languageSelect.value
            };
            localStorage.setItem('tts_preferences', JSON.stringify(prefs));
        });
    </script>
</body>
</html>
