<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Voice Generator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .glass-effect {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .voice-card {
            transition: all 0.3s ease;
        }
        .voice-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }
        .voice-card.selected {
            border-color: #667eea;
            background: rgba(102, 126, 234, 0.1);
        }
        .progress-bar {
            transition: width 0.3s ease;
        }
        .notification {
            animation: slideIn 0.3s ease;
        }
        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        .hidden { display: none !important; }
    </style>
</head>
<body class="min-h-screen gradient-bg">
    <!-- Header -->
    <header class="glass-effect text-white p-4">
        <div class="container mx-auto flex justify-between items-center">
            <h1 class="text-2xl font-bold flex items-center">
                <i class="fas fa-microphone mr-2"></i>
                AI Voice Generator
            </h1>
            <div class="flex items-center space-x-4">
                <span class="text-sm opacity-75">Powered by AI</span>
                <button id="settingsBtn" class="p-2 rounded-lg hover:bg-white hover:bg-opacity-20 transition">
                    <i class="fas fa-cog"></i>
                </button>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto p-4 space-y-6">
        <!-- Text Input Section -->
        <section class="glass-effect rounded-xl p-6">
            <h2 class="text-xl font-semibold text-white mb-4">
                <i class="fas fa-edit mr-2"></i>
                Enter Your Text
            </h2>
            <textarea 
                id="textInput" 
                placeholder="Type or paste your text here..." 
                class="w-full h-32 p-4 rounded-lg border border-gray-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 resize-none"
                maxlength="5000"
            ></textarea>
            <div class="flex justify-between items-center mt-2 text-white text-sm">
                <span id="charCount">0 / 5000 characters</span>
                <button id="clearText" class="text-red-300 hover:text-red-100">
                    <i class="fas fa-trash mr-1"></i>Clear
                </button>
            </div>
        </section>

        <!-- Voice Configuration -->
        <section class="glass-effect rounded-xl p-6">
            <h2 class="text-xl font-semibold text-white mb-4">
                <i class="fas fa-sliders-h mr-2"></i>
                Voice Configuration
            </h2>
            
            <!-- Engine Selection -->
            <div class="grid md:grid-cols-2 gap-4 mb-6">
                <div>
                    <label class="block text-white text-sm font-medium mb-2">AI Engine</label>
                    <select id="engineSelect" class="w-full p-3 rounded-lg border border-gray-300 focus:border-blue-500">
                        <option value="gemini">Google Gemini</option>
                        <option value="edge">Microsoft Edge</option>
                    </select>
                </div>
                <div>
                    <label class="block text-white text-sm font-medium mb-2">Language</label>
                    <select id="languageSelect" class="w-full p-3 rounded-lg border border-gray-300 focus:border-blue-500">
                        <option value="en-US">English (US)</option>
                        <option value="en-GB">English (UK)</option>
                        <option value="si-LK">Sinhala (Sri Lanka)</option>
                        <option value="ta-LK">Tamil (Sri Lanka)</option>
                    </select>
                </div>
            </div>

            <!-- Voice Selection -->
            <div class="mb-6">
                <label class="block text-white text-sm font-medium mb-3">Select Voice</label>
                <div id="voiceGrid" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3">
                    <!-- Voice cards will be populated here -->
                </div>
            </div>

            <!-- Advanced Settings -->
            <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-4">
                <div>
                    <label class="block text-white text-sm font-medium mb-2">
                        Speech Rate: <span id="rateValue">0%</span>
                    </label>
                    <input type="range" id="speechRate" min="-50" max="50" value="0" 
                           class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                </div>
                <div>
                    <label class="block text-white text-sm font-medium mb-2">
                        Pitch: <span id="pitchValue">0Hz</span>
                    </label>
                    <input type="range" id="speechPitch" min="-50" max="50" value="0" 
                           class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                </div>
                <div>
                    <label class="block text-white text-sm font-medium mb-2">
                        Temperature: <span id="tempValue">0.7</span>
                    </label>
                    <input type="range" id="temperature" min="0.1" max="1.0" step="0.1" value="0.7" 
                           class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                </div>
                <div>
                    <label class="block text-white text-sm font-medium mb-2">Audio Format</label>
                    <select id="formatSelect" class="w-full p-2 rounded-lg border border-gray-300">
                        <option value="mp3">MP3</option>
                        <option value="wav">WAV</option>
                        <option value="ogg">OGG</option>
                    </select>
                </div>
            </div>

            <!-- Enhancement Options -->
            <div class="mt-4 flex items-center space-x-4">
                <label class="flex items-center text-white">
                    <input type="checkbox" id="enhanceAudio" class="mr-2 rounded">
                    <span class="text-sm">Enhance Audio Quality</span>
                </label>
            </div>
        </section>

        <!-- Generate Button -->
        <section class="text-center">
            <button id="generateBtn" 
                    class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-4 px-8 rounded-xl transition duration-300 transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed">
                <i class="fas fa-magic mr-2"></i>
                Generate Speech
            </button>
        </section>

        <!-- Progress Section -->
        <section id="progressSection" class="glass-effect rounded-xl p-6 hidden">
            <div class="flex items-center justify-between mb-2">
                <span class="text-white font-medium">Generating...</span>
                <span id="progressPercent" class="text-white text-sm">0%</span>
            </div>
            <div class="w-full bg-gray-200 rounded-full h-2">
                <div id="progressBar" class="progress-bar bg-blue-600 h-2 rounded-full" style="width: 0%"></div>
            </div>
            <p id="progressStatus" class="text-white text-sm mt-2 opacity-75">Initializing...</p>
        </section>

        <!-- Audio Player Section -->
        <section id="audioPlayerContainer" class="glass-effect rounded-xl p-6 hidden">
            <h2 class="text-xl font-semibold text-white mb-4">
                <i class="fas fa-play-circle mr-2"></i>
                Generated Audio
            </h2>
            <audio id="audioPlayer" controls class="w-full mb-4">
                Your browser does not support the audio element.
            </audio>
            <div id="audioInfo" class="text-white text-sm">
                <!-- Audio info will be populated here -->
            </div>
            <div class="flex space-x-3 mt-4">
                <button id="downloadBtn" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition">
                    <i class="fas fa-download mr-1"></i>Download
                </button>
                <button id="shareBtn" class="bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg transition">
                    <i class="fas fa-share mr-1"></i>Share
                </button>
            </div>
        </section>

        <!-- Statistics -->
        <section class="glass-effect rounded-xl p-6">
            <h2 class="text-xl font-semibold text-white mb-4">
                <i class="fas fa-chart-bar mr-2"></i>
                Statistics
            </h2>
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-center">
                <div class="bg-white bg-opacity-10 rounded-lg p-4">
                    <div class="text-2xl font-bold text-white" id="totalGenerations">0</div>
                    <div class="text-white text-sm opacity-75">Total Generations</div>
                </div>
                <div class="bg-white bg-opacity-10 rounded-lg p-4">
                    <div class="text-2xl font-bold text-white" id="totalDuration">0s</div>
                    <div class="text-white text-sm opacity-75">Total Duration</div>
                </div>
                <div class="bg-white bg-opacity-10 rounded-lg p-4">
                    <div class="text-2xl font-bold text-white" id="favoriteVoice">-</div>
                    <div class="text-white text-sm opacity-75">Favorite Voice</div>
                </div>
                <div class="bg-white bg-opacity-10 rounded-lg p-4">
                    <div class="text-2xl font-bold text-white" id="avgDuration">0s</div>
                    <div class="text-white text-sm opacity-75">Avg Duration</div>
                </div>
            </div>
        </section>

        <!-- Recent Generations -->
        <section class="glass-effect rounded-xl p-6">
            <h2 class="text-xl font-semibold text-white mb-4">
                <i class="fas fa-history mr-2"></i>
                Recent Generations
            </h2>
            <div id="recentList" class="space-y-3">
                <p class="text-white opacity-75 text-center py-8">No recent generations</p>
            </div>
        </section>
    </main>

    <!-- Notification Container -->
    <div id="notificationContainer" class="fixed top-4 right-4 z-50 space-y-2"></div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-40 hidden">
        <div class="bg-white rounded-lg p-6 flex items-center space-x-3">
            <div class="animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"></div>
            <span>Processing...</span>
        </div>
    </div>

    <script>
        // Application State
        const appState = {
            selectedVoice: null,
            currentEngine: 'gemini',
            stats: {
                totalGenerations: 0,
                totalDuration: 0,
                favoriteVoice: null,
                recentGenerations: []
            }
        };

        // Voice Configurations
        const voiceConfigs = {
            gemini: {
                'Zephyr': { gender: 'neutral', style: 'warm', emoji: '🌬️', description: 'Warm & Friendly' },
                'Puck': { gender: 'neutral', style: 'friendly', emoji: '😊', description: 'Playful & Energetic' },
                'Aoede': { gender: 'female', style: 'professional', emoji: '👩‍💼', description: 'Professional & Clear' },
                'Charon': { gender: 'male', style: 'deep', emoji: '🎭', description: 'Deep & Dramatic' },
                'Fenrir': { gender: 'male', style: 'strong', emoji: '🐺', description: 'Strong & Confident' },
                'Kore': { gender: 'female', style: 'gentle', emoji: '🌸', description: 'Gentle & Soothing' },
                'Aspen': { gender: 'neutral', style: 'calm', emoji: '🌲', description: 'Calm & Natural' },
                'Juniper': { gender: 'female', style: 'bright', emoji: '✨', description: 'Bright & Cheerful' }
            },
            edge: {
                'si-LK-ThiliniNeural': { gender: 'female', language: 'si-LK', emoji: '🇱🇰', description: 'Sinhala Female' },
                'ta-LK-KumarNeural': { gender: 'male', language: 'ta-LK', emoji: '🇱🇰', description: 'Tamil Male' },
                'ta-LK-SaranyaNeural': { gender: 'female', language: 'ta-LK', emoji: '🇱🇰', description: 'Tamil Female' },
                'en-US-JennyNeural': { gender: 'female', language: 'en-US', emoji: '🇺🇸', description: 'American Female' },
                'en-US-GuyNeural': { gender: 'male', language: 'en-US', emoji: '🇺🇸', description: 'American Male' },
                'en-GB-SoniaNeural': { gender: 'female', language: 'en-GB', emoji: '🇬🇧', description: 'British Female' },
                'en-GB-RyanNeural': { gender: 'male', language: 'en-GB', emoji: '🇬🇧', description: 'British Male' }
            }
        };

        // DOM Elements
        const elements = {
            textInput: document.getElementById('textInput'),
            charCount: document.getElementById('charCount'),
            clearText: document.getElementById('clearText'),
            engineSelect: document.getElementById('engineSelect'),
            languageSelect: document.getElementById('languageSelect'),
            voiceGrid: document.getElementById('voiceGrid'),
            speechRate: document.getElementById('speechRate'),
            speechPitch: document.getElementById('speechPitch'),
            temperature: document.getElementById('temperature'),
            formatSelect: document.getElementById('formatSelect'),
            enhanceAudio: document.getElementById('enhanceAudio'),
            generateBtn: document.getElementById('generateBtn'),
            progressSection: document.getElementById('progressSection'),
            progressBar: document.getElementById('progressBar'),
            progressPercent: document.getElementById('progressPercent'),
            progressStatus: document.getElementById('progressStatus'),
            audioPlayerContainer: document.getElementById('audioPlayerContainer'),
            audioPlayer: document.getElementById('audioPlayer'),
            downloadBtn: document.getElementById('downloadBtn'),
            shareBtn: document.getElementById('shareBtn'),
            loadingOverlay: document.getElementById('loadingOverlay'),
            notificationContainer: document.getElementById('notificationContainer')
        };

        // Initialize Application
        function initializeApp() {
            setupEventListeners();
            loadStatistics();
            updateVoiceGrid();
            updateStatistics();
        }

        // Event Listeners
        function setupEventListeners() {
            // Text input
            elements.textInput.addEventListener('input', updateCharCount);
            elements.clearText.addEventListener('click', clearText);

            // Voice configuration
            elements.engineSelect.addEventListener('change', handleEngineChange);
            elements.languageSelect.addEventListener('change', updateVoiceGrid);

            // Sliders
            elements.speechRate.addEventListener('input', updateRateDisplay);
            elements.speechPitch.addEventListener('input', updatePitchDisplay);
            elements.temperature.addEventListener('input', updateTempDisplay);

            // Generate button
            elements.generateBtn.addEventListener('click', generateSpeech);

            // Audio controls
            elements.downloadBtn.addEventListener('click', downloadAudio);
            elements.shareBtn.addEventListener('click', shareAudio);
        }

        // Text Input Functions
        function updateCharCount() {
            const count = elements.textInput.value.length;
            elements.charCount.textContent = `${count} / 5000 characters`;
            
            if (count > 4500) {
                elements.charCount.classList.add('text-red-300');
            } else {
                elements.charCount.classList.remove('text-red-300');
            }
        }

        function clearText() {
            elements.textInput.value = '';
            updateCharCount();
        }

        // Voice Configuration Functions
        function handleEngineChange() {
            appState.currentEngine = elements.engineSelect.value;
            appState.selectedVoice = null;
            updateVoiceGrid();
        }

        function updateVoiceGrid() {
            const currentVoices = voiceConfigs[appState.currentEngine];
            const selectedLanguage = elements.languageSelect.value;
            
            elements.voiceGrid.innerHTML = '';
            
            Object.entries(currentVoices).forEach(([voiceName, config]) => {
                if (appState.currentEngine === 'edge' && config.language !== selectedLanguage) {
                    return;
                }
                
                const voiceCard = createVoiceCard(voiceName, config);
                elements.voiceGrid.appendChild(voiceCard);
            });
        }

        function createVoiceCard(voiceName, config) {
            const card = document.createElement('div');
            card.className = 'voice-card bg-white bg-opacity-10 rounded-lg p-3 cursor-pointer border-2 border-transparent';
            card.innerHTML = `
                <div class="text-center">
                    <div class="text-2xl mb-1">${config.emoji}</div>
                    <div class="text-white font-medium text-sm">${voiceName}</div>
                    <div class="text-white text-xs opacity-75">${config.description}</div>
                </div>
            `;
            
            card.addEventListener('click', () => selectVoice(voiceName, card));
            return card;
        }

        function selectVoice(voiceName, cardElement) {
            // Remove previous selection
            document.querySelectorAll('.voice-card').forEach(card => {
                card.classList.remove('selected');
            });
            
            // Add selection to current card
            cardElement.classList.add('selected');
            appState.selectedVoice = voiceName;
        }

        // Slider Functions
        function updateRateDisplay() {
            const value = elements.speechRate.value;
            document.getElementById('rateValue').textContent = `${value > 0 ? '+' : ''}${value}%`;
        }

        function updatePitchDisplay() {
            const value = elements.speechPitch.value;
            document.getElementById('pitchValue').textContent = `${value > 0 ? '+' : ''}${value}Hz`;
        }

        function updateTempDisplay() {
            const value = elements.temperature.value;
            document.getElementById('tempValue').textContent = value;
        }

        // Main Generation Function (FIXED)
        async function generateSpeech() {
            const text = elements.textInput.value.trim();
            if (!text) {
                showNotification('error', 'Error', 'Please enter some text to generate speech.');
                return;
            }

            if (!appState.selectedVoice) {
                showNotification('error', 'Error', 'Please select a voice.');
                return;
            }

            showLoading(true);
            elements.generateBtn.disabled = true;
            updateProgress(0, 'Initializing...');

            try {
                updateProgress(25, 'Preparing request...');
                
                const requestData = {
                    text: text,
                    engine: elements.engineSelect.value,
                    voice: appState.selectedVoice,
                    language: elements.languageSelect.value,
                    rate: `${elements.speechRate.value > 0 ? '+' : ''}${elements.speechRate.value}%`,
                    pitch: `${elements.speechPitch.value > 0 ? '+' : ''}${elements.speechPitch.value}Hz`,
                    temperature: parseFloat(elements.temperature.value),
                    enhance: elements.enhanceAudio.checked,
                    format: elements.formatSelect.value
                };

                updateProgress(50, 'Generating speech...');
                
                // FIXED: Actual API call instead of simulation
                const response = await fetch('/api/generate', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(requestData)
                });

                if (!response.ok) {
                    const errorData = await response.json().catch(() => ({}));
                    throw new Error(errorData.message || `HTTP ${response.status}: ${response.statusText}`);
                }

                const result = await response.json();
                
                updateProgress(100, 'Complete!');
                
                // Update audio player with actual file
                if (result.filename) {
                    elements.audioPlayer.src = `/api/download/${result.filename}`;
                    elements.audioPlayerContainer.classList.remove('hidden');
                    
                    document.getElementById('audioInfo').innerHTML = `
                        <div class="grid grid-cols-2 gap-4 text-sm">
                            <div><strong>Size:</strong> ${(result.size / 1024).toFixed(1)} KB</div>
                            <div><strong>Duration:</strong> ${result.duration}s</div>
                            <div><strong>Format:</strong> ${result.format.toUpperCase()}</div>
                            <div><strong>Voice:</strong> ${appState.selectedVoice}</div>
                        </div>
                    `;
                }
                
                showNotification('success', 'Success!', 'Speech generated successfully.');
                
                // Update statistics
                appState.stats.totalGenerations++;
                appState.stats.totalDuration += result.duration || 5.2;
                updateStatistics();
                saveStatistics();

                // Add to recent generations
                addToRecentGenerations({
                    text: requestData.text.substring(0, 50) + (requestData.text.length > 50 ? '...' : ''),
                    voice: appState.selectedVoice,
                    timestamp: new Date().toLocaleTimeString(),
                    filename: result.filename,
                    duration: result.duration || 5.2
                });

            } catch (error) {
                console.error('Generation error:', error);
                showNotification('error', 'Generation Failed', error.message || 'Failed to generate speech. Please check your connection and try again.');
            } finally {
                showLoading(false);
                elements.generateBtn.disabled = false;
                setTimeout(() => {
                    elements.progressSection.classList.add('hidden');
                }, 2000);
            }
        }

        // Progress Functions
        function updateProgress(percent, status) {
            elements.progressSection.classList.remove('hidden');
            elements.progressBar.style.width = `${percent}%`;
            elements.progressPercent.textContent = `${percent}%`;
            elements.progressStatus.textContent = status;
        }

        function showLoading(show) {
            if (show) {
                elements.loadingOverlay.classList.remove('hidden');
            } else {
                elements.loadingOverlay.classList.add('hidden');
            }
        }

        // Notification System
        function showNotification(type, title, message) {
            const notification = document.createElement('div');
            notification.className = `notification bg-white rounded-lg shadow-lg p-4 max-w-sm border-l-4 ${
                type === 'success' ? 'border-green-500' : 
                type === 'error' ? 'border-red-500' : 'border-blue-500'
            }`;
            
            notification.innerHTML = `
                <div class="flex justify-between items-start">
                    <div>
                        <h4 class="font-semibold ${
                            type === 'success' ? 'text-green-800' : 
                            type === 'error' ? 'text-red-800' : 'text-blue-800'
                        }">${title}</h4>
                        <p class="text-gray-600 text-sm mt-1">${message}</p>
                    </div>
                    <button class="text-gray-400 hover:text-gray-600" onclick="this.parentElement.parentElement.remove()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            `;
            
            elements.notificationContainer.appendChild(notification);
            
            setTimeout(() => {
                if (notification.parentElement) {
                    notification.remove();
                }
            }, 5000);
        }

        // Audio Functions
        function downloadAudio() {
            const audioSrc = elements.audioPlayer.src;
            if (audioSrc) {
                const a = document.createElement('a');
                a.href = audioSrc;
                a.download = `generated-speech-${Date.now()}.${elements.formatSelect.value}`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                showNotification('success', 'Download Started', 'Your audio file is being downloaded.');
            }
        }

        function shareAudio() {
            if (navigator.share && elements.audioPlayer.src) {
                navigator.share({
                    title: 'Generated Speech',
                    text: 'Check out this AI-generated speech!',
                    url: elements.audioPlayer.src
                }).catch(console.error);
            } else {
                // Fallback: copy link to clipboard
                navigator.clipboard.writeText(elements.audioPlayer.src).then(() => {
                    showNotification('success', 'Link Copied', 'Audio link copied to clipboard.');
                }).catch(() => {
                    showNotification('error', 'Share Failed', 'Unable to share audio.');
                });
            }
        }

        // Statistics Functions
        function updateStatistics() {
            document.getElementById('totalGenerations').textContent = appState.stats.totalGenerations;
            document.getElementById('totalDuration').textContent = `${appState.stats.totalDuration.toFixed(1)}s`;
            document.getElementById('favoriteVoice').textContent = appState.stats.favoriteVoice || '-';
            
            const avgDuration = appState.stats.totalGenerations > 0 ? 
                (appState.stats.totalDuration / appState.stats.totalGenerations).toFixed(1) : 0;
            document.getElementById('avgDuration').textContent = `${avgDuration}s`;
        }

        function addToRecentGenerations(generation) {
            appState.stats.recentGenerations.unshift(generation);
            if (appState.stats.recentGenerations.length > 5) {
                appState.stats.recentGenerations.pop();
            }
            updateRecentList();
            saveStatistics();
        }

        function updateRecentList() {
            const recentList = document.getElementById('recentList');
            
            if (appState.stats.recentGenerations.length === 0) {
                recentList.innerHTML = '<p class="text-white opacity-75 text-center py-8">No recent generations</p>';
                return;
            }
            
            recentList.innerHTML = appState.stats.recentGenerations.map(gen => `
                <div class="bg-white bg-opacity-10 rounded-lg p-3 flex justify-between items-center">
                    <div>
                        <div class="text-white font-medium">${gen.text}</div>
                        <div class="text-white text-sm opacity-75">${gen.voice} • ${gen.timestamp} • ${gen.duration}s</div>
                    </div>
                    <button onclick="playRecentAudio('${gen.filename}')" class="text-blue-300 hover:text-blue-100">
                        <i class="fas fa-play"></i>
                    </button>
                </div>
            `).join('');
        }

        function playRecentAudio(filename) {
            if (filename) {
                elements.audioPlayer.src = `/api/download/${filename}`;
                elements.audioPlayerContainer.classList.remove('hidden');
                elements.audioPlayer.play();
            }
        }

        // Local Storage Functions
        function saveStatistics() {
            localStorage.setItem('tts-stats', JSON.stringify(appState.stats));
        }

        function loadStatistics() {
            const saved = localStorage.getItem('tts-stats');
            if (saved) {
                appState.stats = { ...appState.stats, ...JSON.parse(saved) };
                updateRecentList();
            }
        }

        // Initialize app when DOM is loaded
        document.addEventListener('DOMContentLoaded', initializeApp);
    </script>
</body>
</html>
